hsm {
Machine = Header (State | Code)+
Header = "#" Name

State = "#" "#" StateName Transition+
Code = "#" "#" Name? verbatim+

Transition =
  | "#" "#" "#" TransitionName verbatim+

verbatim =
  | "⟪" verbatim "⟫"  -- rec
  | (~vbracket any)+  -- bottom
  
vbracket = "⟪" | "⟫"
Name = letter alnum*
StateName = "*" Name "*"
TransitionName = "*" "*" Name "*" "*"
}
